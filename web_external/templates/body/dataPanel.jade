include ../layout/panelMixins.jade

+panel-title('Available Datasets')
  i(class='icon-up-open',
    data-toggle='collapse',
    data-target='#m-data-panel > .m-panel-content')
  i(class='icon-cancel')

if datasets
  +panel-content('collapse in')
    .datasets
      each dataset in datasets
        if dataset.metadata()
          .dataset
            span(title=dataset.get('name'))= dataset.get('name').length > 13 ? dataset.get('name').slice(0,13) + "..." : dataset.get('name')
              - var attributes = {'m-dataset-id': dataset.get('_id')}
              if dataset.isRenderable()
                //- right arrow icon to move dataset into current session
                - var classes = (dataset.get('displayed') ? 'icon-right-circled icon-disabled dataset-in-session' : 'icon-right-circled icon-enabled add-dataset-to-session')
                i(class=classes)&attributes(attributes)
              //- trash icon to delete dataset
              - var classes = (dataset.get('displayed') ? 'icon-trash delete-dataset icon-disabled dataset-in-session' : 'icon-trash delete-dataset icon-enabled')
              i(class=classes)&attributes(attributes)
              //- info icon for minerva metadata display
              i.icon-info-circled.icon-enabled.dataset-info&attributes(attributes)
